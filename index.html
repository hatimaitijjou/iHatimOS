<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HATIM OS | INFINITY 2026</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --surface: rgba(15, 15, 15, 0.6);
            --accent: #00d2ff;
            --accent-glow: rgba(0, 210, 255, 0.4);
            --glass: blur(30px) saturate(180%);
            --border: rgba(255, 255, 255, 0.08);
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: #fff; height: 100vh; overflow: hidden; }

        /* --- خلفية كونية متحركة --- */
        #nebula-bg {
            position: fixed; inset: 0; z-index: -2;
            background: radial-gradient(circle at center, #111 0%, #000 100%);
        }
        .star { position: absolute; background: white; border-radius: 50%; opacity: 0.5; animation: twinkle 3s infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }

        /* --- شعار حاتم العالمي --- */
        .h-brand {
            width: 50px; height: 50px; background: linear-gradient(135deg, var(--accent), #3a7bd5);
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            font-weight: 900; font-size: 26px; color: #fff; box-shadow: 0 0 20px var(--accent-glow);
            cursor: pointer; transition: 0.3s;
        }
        .h-brand:hover { transform: rotate(10deg) scale(1.1); }

        /* --- سطح المكتب --- */
        #desktop {
            height: 100vh; padding: 30px; display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            grid-auto-rows: 100px; gap: 20px; z-index: 1;
        }

        .app-node {
            display: flex; flex-direction: column; align-items: center; gap: 8px;
            cursor: pointer; transition: 0.2s; padding: 10px; border-radius: 15px;
        }
        .app-node:hover { background: rgba(255,255,255,0.05); backdrop-filter: var(--glass); }
        .app-node i { font-size: 35px; color: var(--accent); filter: drop-shadow(0 0 10px var(--accent-glow)); }
        .app-node span { font-size: 12px; font-weight: 500; text-align: center; }

        /* --- متجر تطبيقات حاتم اللامتناهي --- */
        #store-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(50px);
            z-index: 10000; display: none; padding: 50px; overflow-y: auto;
        }
        .store-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .store-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .store-card {
            background: var(--surface); border: 1px solid var(--border); padding: 20px;
            border-radius: 20px; transition: 0.3s; cursor: pointer; text-align: center;
        }
        .store-card:hover { border-color: var(--accent); background: rgba(255,255,255,0.05); }

        /* --- النوافذ (Next-Gen Windows) --- */
        .win {
            position: absolute; background: var(--surface); backdrop-filter: var(--glass);
            border: 1px solid var(--border); border-radius: 20px; box-shadow: 0 40px 100px rgba(0,0,0,0.8);
            display: flex; flex-direction: column; overflow: hidden; z-index: 10;
        }
        .win-bar { padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.03); cursor: move; }
        .win-body { flex: 1; overflow: auto; position: relative; }

        /* --- شريط المهام --- */
        #taskbar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            height: 70px; background: var(--surface); backdrop-filter: var(--glass);
            border-radius: 25px; border: 1px solid var(--border);
            display: flex; align-items: center; padding: 0 25px; gap: 20px; z-index: 9999;
        }
        .dock-tool { font-size: 24px; color: #aaa; transition: 0.3s; cursor: pointer; }
        .dock-tool:hover { color: var(--accent); transform: scale(1.3) translateY(-10px); }

        /* --- شاشة القفل --- */
        #lock {
            position: fixed; inset: 0; background: #000; z-index: 999999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 1s cubic-bezier(0.85, 0, 0.15, 1);
        }
    </style>
</head>
<body onload="bootOS()">

    <div id="nebula-bg"></div>
    <div id="lock" onclick="this.style.transform='translateY(-100%)'">
        <div class="h-brand" style="width:100px; height:100px; font-size:50px; margin-bottom:20px;">H</div>
        <h1 id="clock" style="font-size: 80px; margin: 0; font-weight: 200;">00:00</h1>
        <p style="letter-spacing: 5px; opacity: 0.5;">HATIM OS INFINITY</p>
        <p style="margin-top: 40px; font-size: 0.9rem; color: var(--accent);">إضغط للدخول إلى العالمية</p>
    </div>

    <div id="desktop"></div>

    <div id="store-overlay">
        <div class="store-header">
            <h1><i class="fas fa-shopping-bag"></i> متجر حاتم اللامتناهي</h1>
            <button onclick="closeStore()" style="background:none; border:none; color:white; font-size:30px; cursor:pointer;">&times;</button>
        </div>
        <div class="store-grid" id="store-items">
            </div>
    </div>

    <div id="taskbar">
        <div class="h-brand" onclick="toggleStore()" title="Hatim Menu">H</div>
        <i class="fas fa-search dock-tool"></i>
        <i class="fas fa-robot dock-tool" onclick="openApp('AI')"></i>
        <i class="fas fa-globe dock-tool" onclick="openApp('Web')"></i>
        <i class="fas fa-code dock-tool" onclick="openApp('Dev')"></i>
        <div style="width:1px; height:30px; background:var(--border);"></div>
        <div id="mini-clock" style="font-size:12px; color:#888;">00:00</div>
    </div>

    <script>
        let zIndex = 100;
        const desktopApps = JSON.parse(localStorage.getItem('h_apps')) || ['Store', 'Hatim AI', 'Browser', 'Terminal'];

        function bootOS() {
            createStars();
            renderDesktop();
            updateClock();
            setInterval(updateClock, 1000);
            loadStore();
        }

        function createStars() {
            for(let i=0; i<100; i++) {
                let star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random()*3+'px';
                star.style.height = star.style.width;
                star.style.left = Math.random()*100+'vw';
                star.style.top = Math.random()*100+'vh';
                document.getElementById('nebula-bg').appendChild(star);
            }
        }

        function updateClock() {
            const d = new Date();
            const t = d.getHours().toString().padStart(2,'0') + ":" + d.getMinutes().toString().padStart(2,'0');
            document.getElementById('clock').innerText = t;
            document.getElementById('mini-clock').innerText = t;
        }

        function renderDesktop() {
            const desk = document.getElementById('desktop');
            desk.innerHTML = '';
            desktopApps.forEach(app => {
                desk.innerHTML += `
                    <div class="app-node" ondblclick="openApp('${app}')">
                        <i class="${getIcon(app)}"></i>
                        <span>${app}</span>
                    </div>
                `;
            });
        }

        function getIcon(name) {
            const icons = { 'Store': 'fas fa-box-open', 'Hatim AI': 'fas fa-brain', 'Browser': 'fas fa-compass', 'Terminal': 'fas fa-terminal', 'YouTube': 'fab fa-youtube', 'Spotify': 'fab fa-spotify', 'Instagram': 'fab fa-instagram' };
            return icons[name] || 'fas fa-rocket';
        }

        function openApp(name) {
            zIndex++;
            const win = document.createElement('div');
            win.className = 'win';
            win.style.zIndex = zIndex;
            win.style.width = '80vw'; win.style.height = '70vh';
            win.style.top = '10vh'; win.style.left = '10vw';

            win.innerHTML = `
                <div class="win-bar" onmousedown="drag(this)">
                    <span><i class="${getIcon(name)}"></i> ${name}</span>
                    <div style="display:flex; gap:10px;">
                        <div style="width:12px; height:12px; background:#28c840; border-radius:50%;"></div>
                        <div style="width:12px; height:12px; background:#ff5f57; border-radius:50%; cursor:pointer;" onclick="this.closest('.win').remove()"></div>
                    </div>
                </div>
                <div class="win-body">
                    ${getAppContent(name)}
                </div>
            `;
            document.body.appendChild(win);
        }

        function getAppContent(name) {
            if(name === 'Hatim AI') return `<div style="padding:40px; text-align:center;"><h2>Nebula AI Assistant</h2><p>أهلاً بك حاتم، أنا محرك الذكاء الخاص بك. كيف يمكنني تطوير عالمنا اليوم؟</p><input type="text" placeholder="أمر برمجي..." style="width:80%; padding:15px; border-radius:30px; border:none; background:rgba(255,255,255,0.05); color:white; text-align:center;"></div>`;
            if(name === 'Browser') return `<iframe src="https://www.google.com/search?igu=1" style="width:100%; height:100%; border:none; background:white;"></iframe>`;
            return `<div style="padding:40px; text-align:center;"><h3>تطبيق ${name} العالمي</h3><p>يعمل الآن ضمن بيئة Hatim OS السحابية.</p></div>`;
        }

        function toggleStore() { document.getElementById('store-overlay').style.display = 'block'; }
        function closeStore() { document.getElementById('store-overlay').style.display = 'none'; }

        function loadStore() {
            const items = ['YouTube', 'Spotify', 'Instagram', 'ChatGPT', 'WhatsApp', 'Netflix', 'Discord', 'Facebook', 'TikTok', 'Twitter', 'VS Code', 'GitHub'];
            const grid = document.getElementById('store-items');
            items.forEach(item => {
                grid.innerHTML += `
                    <div class="store-card" onclick="installApp('${item}')">
                        <i class="${getIcon(item)}" style="font-size:40px; color:var(--accent); margin-bottom:15px;"></i>
                        <h3>${item}</h3>
                        <p style="font-size:0.8rem; opacity:0.6;">تطبيق رسمي لنظام حاتم</p>
                        <button style="background:var(--accent); border:none; color:black; padding:8px 20px; border-radius:20px; font-weight:bold; margin-top:10px;">تثبيت</button>
                    </div>
                `;
            });
        }

        function installApp(name) {
            if(!desktopApps.includes(name)) {
                desktopApps.push(name);
                localStorage.setItem('h_apps', JSON.stringify(desktopApps));
                renderDesktop();
                alert('تم تثبيت ' + name + ' بنجاح في عالمك!');
            }
        }

        function drag(el) {
            const win = el.closest('.win');
            el.onmousedown = (e) => {
                let px = e.clientX - win.offsetLeft;
                let py = e.clientY - win.offsetTop;
                document.onmousemove = (e) => {
                    win.style.left = (e.clientX - px) + 'px';
                    win.style.top = (e.clientY - py) + 'px';
                };
                document.onmouseup = () => document.onmousemove = null;
            };
        }
    </script>
</body>
</html>
